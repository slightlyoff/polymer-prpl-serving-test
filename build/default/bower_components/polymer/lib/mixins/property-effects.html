<!--
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><html><head><link rel="import" href="../utils/boot.html">
<link rel="import" href="../utils/mixin.html">
<link rel="import" href="../utils/path.html">
<!-- for notify, reflect -->
<link rel="import" href="../utils/case-map.html">
<link rel="import" href="property-accessors.html">
<!-- for annotated effects -->
<link rel="import" href="template-stamp.html">


<script>(function(){'use strict';function t(ee,te){let ae=ee[te];if(!ae)ae=ee[te]={};else if(!ee.hasOwnProperty(te))for(let ne in ae=ee[te]=Object.create(ee[te]),ae){let re=ae[ne],de=ae[ne]=Array(re.length);for(let oe=0;oe<re.length;oe++)de[oe]=re[oe]}return ae}function r(ee,te,ae,ne,re){if(te){let de,oe=Z++;for(let ie in ae)d(ee,te,oe,ie,ae,ne,re)&&(de=!0);return de}}function d(ee,te,ae,ne,re,de,oe){let ie,_e=oe?Polymer.Path.root(ne):ne,pe=te[_e];if(pe)for(let he,se=0,le=pe.length;se<le&&(he=pe[se]);se++)he.info&&he.info.lastRun===ae||oe&&!o(ne,he.trigger)||(he.fn(ee,ne,re,de,he.info,oe),he.info&&(he.info.lastRun=ae),ie=!0);return ie}function o(ee,te){if(te){let ae=te.name;return ae==ee||te.structured&&Polymer.Path.isAncestor(ae,ee)||te.wildcard&&Polymer.Path.isDescendant(ae,ee)}return!0}function _(ee,te,ae,ne,re){let de=ee[re.methodName],oe=re.property;de?de.call(ee,ee.__data[oe],ne[oe]):console.warn('observer method `'+re.methodName+'` not defined')}function s(ee,te,ae,ne,re){let de=ee.__notifyEffects,oe,ie=Z++;for(let pe in te)te[pe]&&(de&&d(ee,de,ie,pe,ae,ne,re)?oe=!0:re&&h(ee,pe,ae)&&(oe=!0));let _e;oe&&(_e=ee.__dataHost)&&_e._flushProperties&&_e._flushProperties()}function h(ee,te,ae){let ne=Polymer.Path.root(te);if(ne!==te){let re=Polymer.CaseMap.camelToDashCase(ne)+'-changed';return f(ee,re,ae[te],te),!0}}function f(ee,te,ae,ne){let re={value:ae,queueProperty:!0};ne&&(re.path=ne),ee.dispatchEvent(new CustomEvent(te,{detail:re}))}function P(ee,te,ae,ne,re,de){let oe=de?Polymer.Path.root(te):te,ie=oe==te?null:te,_e=ie?Polymer.Path.get(ee,ie):ee.__data[te];ie&&_e===void 0&&(_e=ae[te]),f(ee,re.eventName,_e,ie)}function u(ee,te,ae){ee.addEventListener(ae.event,function(ne){g(ne,te,ae.property,ae.path,ae.negate)})}function g(ee,te,ae,ne,re){let de,oe=ee.detail&&ee.detail.path;oe?(ne=Polymer.Path.translate(ae,ne,oe),de=ee.detail&&ee.detail.value):de=ee.target[ae],de=re?!de:de,y(te,ne,de,ee)}function y(ee,te,ae,ne){let re=ne.detail;re&&re.queueProperty?(!ee.__readOnly||!ee.__readOnly[te])&&ee._setPendingPropertyOrPath(te,ae,!0,!!re.path):ee.set(te,ae)}function c(ee,te,ae,ne,re){let de=ee.__data[te];Polymer.sanitizeDOMValue&&(de=Polymer.sanitizeDOMValue(de,re.attrName,'attribute',ee)),ee._propertyToAttribute(te,re.attrName,de)}function E(ee,te,ae,ne){let re=ee.__computeEffects;if(re)for(let de=te;r(ee,re,de,ae,ne);)Object.assign(ae,ee.__dataOld),Object.assign(te,ee.__dataPending),de=ee.__dataPending,ee.__dataPending=null}function C(ee,te,ae,ne,re){let de=Y(ee,te,ae,ne,re),oe=re.methodInfo;ee.__propertyEffects&&ee.__propertyEffects[oe]?ee._setPendingProperty(oe,de,!0):ee[oe]=de}function O(ee,te,ae){let ne;if(ae&&(ne=ee.__dataLinkedPaths)){const re=ee.__dataTemp;let de;for(let oe in ne){let ie=ne[oe];for(let _e in te)if(Polymer.Path.isDescendant(oe,_e)){de=Polymer.Path.translate(oe,ie,_e),re[de]=te[de]=te[_e];let pe=ee.__dataToNotify||(ee.__dataToNotify={});pe[de]=!0}else if(Polymer.Path.isDescendant(ie,_e)){de=Polymer.Path.translate(ie,oe,_e),re[de]=te[de]=te[_e];let pe=ee.__dataToNotify||(ee.__dataToNotify={});pe[de]=!0}}}}function N(ee,te,ae,ne){for(let de,re=0;re<te.parts.length;re++)de=te.parts[re],de.signature?A(ee,te,de,ae,ne):!de.literal&&('attribute'===te.kind&&'-'===te.name[0]?console.warn('Cannot set attribute '+te.name+' because "-" is not a valid attribute starting character'):ee._addPropertyEffect(Polymer.Path.root(de.value),J.PROPAGATE,{fn:T,info:{kind:te.kind,index:ae,name:te.name,propertyName:te.propertyName,value:de.value,isCompound:te.isCompound,compoundIndex:de.compoundIndex,event:de.event,customEvent:de.customEvent,negate:de.negate}}))}function T(ee,te,ae,ne,re,de){let oe,ie=ee.__templateNodes[re.index];if(de&&te.length>re.value.length&&'property'==re.kind&&!re.isCompound&&ie.__propertyEffects&&ie.__propertyEffects[re.name]){let _e=ae[te];te=Polymer.Path.translate(re.value,re.name,te),ie._setPendingPropertyOrPath(te,_e,!1,!0)&&ee._enqueueClient(ie)}else oe=te==re.value?de&&Polymer.Path.isPath(te)?Polymer.Path.get(ee,te):ee.__data[te]:Polymer.Path.get(ee,re.value),x(ee,re,oe)}function x(ee,te,ae){let ne=ee.__templateNodes[te.index];if(ae=I(ne,ae,te),Polymer.sanitizeDOMValue&&(ae=Polymer.sanitizeDOMValue(ae,te.name,te.kind,ne)),'attribute'==te.kind)ee._valueToNodeAttribute(ne,ae,te.name);else{let re=te.name;ne.__propertyEffects&&ne.__propertyEffects[re]?(!ne.__readOnly||!ne.__readOnly[re])&&ne._setPendingProperty(re,ae)&&ee._enqueueClient(ne):ee._setUnmanagedPropertyToNode(ne,re,ae)}}function I(ee,te,ae){if(ae.negate&&(te=!te),ae.isCompound){let ne=ee.__dataCompoundStorage[ae.name];ne[ae.compoundIndex]=te,te=ne.join('')}return'attribute'!==ae.kind&&('textContent'===ae.name||'input'==ee.localName&&'value'==ae.name)&&(te=void 0==te?'':te),te}function A(ee,te,ae,ne,re){H(ee,ae.signature,J.PROPAGATE,L,{index:ne,isCompound:te.isCompound,compoundIndex:ae.compoundIndex,kind:te.kind,name:te.name,negate:ae.negate,part:ae},re)}function L(ee,te,ae,ne,re){let de=Y(ee,te,ae,ne,re);x(ee,re.methodInfo,de)}function z(ee){if(!ee._processed){for(let ae,te=0;te<ee.length;te++){ae=ee[te];for(let re,ne=0;ne<ae.bindings.length;ne++){re=ae.bindings[ne];for(let oe,de=0;de<re.parts.length;de++)oe=re.parts[de],oe.literal||(oe.signature=F(oe.value),!oe.signature&&(oe.rootProperty=Polymer.Path.root(oe.value)))}if(ae.templateContent){z(ae.templateContent._notes);let ne=ae.templateContent._hostProps=R(ae.templateContent._notes),re=[];for(let de in ne)re.push({index:ae.index,kind:'property',name:'_host_'+de,parts:[{mode:'{',value:de}]});ae.bindings=ae.bindings.concat(re)}}ee._processed=!0}}function R(ee){let te={};for(let ne,ae=0;ae<ee.length&&(ne=ee[ae]);ae++){for(let oe,re=0,de=ne.bindings;re<de.length&&(oe=de[re]);re++)for(let pe,ie=0,_e=oe.parts;ie<_e.length&&(pe=_e[ie]);ie++)if(pe.signature){let se=pe.signature.args;for(let he,le=0;le<se.length;le++)he=se[le].rootProperty,he&&(te[he]=!0);te[pe.signature.methodName]=!0}else pe.rootProperty&&(te[pe.rootProperty]=!0);if(ne.templateContent){let re=ne.templateContent._hostProps;Object.assign(te,re)}}return te}function D(ee){return ee.name&&'attribute'!=ee.kind&&'text'!=ee.kind&&!ee.isCompound&&'{'===ee.parts[0].mode}function S(ee,te,ae,ne,re,de){let oe=re||Q.camelToDashCase(ae)+'-changed';ee.__notifyListeners=ee.__notifyListeners||[],ee.__notifyListeners.push({index:te,property:ae,path:ne,event:oe,negate:de})}function M(ee){let te=ee.__notifyListeners;for(let re,de,ae=0,ne=te.length;ae<ne&&(re=te[ae]);ae++)de=ee.__templateNodes[re.index],u(de,ee,re)}function w(ee){let te=ee.__templateNotes;if(te.length)for(let ae=0;ae<te.length;ae++){let ne=te[ae],re=ee.__templateNodes[ae];re.__dataHost=ee,ne.bindings&&q(ne,re)}ee.__notifyListeners&&M(ee)}function H(ee,te,ae,ne,re,de){let oe=te.static||de&&de[te.methodName],ie={methodName:te.methodName,args:te.args,methodInfo:re,dynamicFn:oe};for(let pe,_e=0;_e<te.args.length&&(pe=te.args[_e]);_e++)pe.literal||ee._addPropertyEffect(pe.rootProperty,ae,{fn:ne,info:ie,trigger:pe});oe&&ee._addPropertyEffect(te.methodName,ae,{fn:ne,info:ie})}function Y(ee,te,ae,ne,re){let de=ee._methodHost||ee,oe=de[re.methodName];if(oe){let ie=B(ee.__data,re.args,te,ae);return oe.apply(de,ie)}re.dynamicFn||console.warn('method `'+re.methodName+'` not defined')}function F(ee){let te=ee.match(/([^\s]+?)\(([\s\S]*)\)/);if(te){let ae={methodName:te[1],static:!0};if(te[2].trim()){let ne=te[2].replace(/\\,/g,'&comma;').split(',');return V(ne,ae)}return ae.args=W,ae}return null}function V(ee,te){return te.args=ee.map(function(ae){let ne=U(ae);return ne.literal||(te.static=!1),ne},this),te}function U(ee){let te=ee.trim().replace(/&comma;/g,',').replace(/\\(.)/g,'$1'),ae={name:te},ne=te[0];return'-'===ne&&(ne=te[1]),'0'<=ne&&'9'>=ne&&(ne='#'),'\''===ne||'"'===ne?(ae.value=te.slice(1,-1),ae.literal=!0):'#'===ne?(ae.value=+te,ae.literal=!0):void 0,(ae.literal||(ae.rootProperty=Polymer.Path.root(te),ae.structured=Polymer.Path.isDeep(te),ae.structured&&(ae.wildcard='.*'==te.slice(-2),ae.wildcard&&(ae.name=te.slice(0,-2)))),ae)}function B(ee,te,ae,ne){let re=[];for(let de=0,oe=te.length;de<oe;de++){let pe,ie=te[de],_e=ie.name;if(ie.literal?pe=ie.value:ie.structured?(pe=Polymer.Path.get(ee,_e),void 0==pe&&(pe=ne[_e])):pe=ee[_e],ie.wildcard){let se=0===_e.indexOf(ae+'.'),le=0===ae.indexOf(_e)&&!se;re[de]={path:le?ae:_e,value:le?ne[ae]:pe,base:pe}}else re[de]=pe}return re}function q(ee,te){let ae=ee.bindings;for(let re,ne=0;ne<ae.length;ne++)if(re=ae[ne],re.isCompound){let de=te.__dataCompoundStorage||(te.__dataCompoundStorage={}),oe=re.parts,ie=Array(oe.length);for(let pe=0;pe<oe.length;pe++)ie[pe]=oe[pe].literal;let _e=re.name;de[_e]=ie,re.literal&&'property'==re.kind&&(te[_e]=re.literal)}}function G(ee,te,ae,ne){let re=ae+'.splices';ee.notifyPath(re,{indexSplices:ne}),ee.notifyPath(ae+'.length',te.length),ee.__data[re]={indexSplices:null}}function $(ee,te,ae,ne,re,de){G(ee,te,ae,[{index:ne,addedCount:re,removed:de,object:te,type:'splice'}])}function K(ee){return ee[0].toUpperCase()+ee.substring(1)}function X(ee,te){ee.__dataOld=ee.__dataOld||{},ee.__dataPending=ee.__dataPending||{};let ae=ee.__readOnly;for(let ne in te)ae&&ae[ne]||(ee.__data[ne]=ee.__dataPending[ne]=te[ne])}const Q=Polymer.CaseMap;let Z=0;const J={ANY:'__propertyEffects',COMPUTE:'__computeEffects',REFLECT:'__reflectEffects',NOTIFY:'__notifyEffects',PROPAGATE:'__propagateEffects',OBSERVE:'__observeEffects',READ_ONLY:'__readOnly'},W=[];Polymer.PropertyEffects=Polymer.dedupingMixin(function(ee){const te=Polymer.TemplateStamp(Polymer.PropertyAccessors(ee));class ae extends te{get PROPERTY_EFFECT_TYPES(){return J}_initializeProperties(){for(let ne in super._initializeProperties(),this.__dataInitialized=!1,this.__dataClientsInitialized=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__propertyEffects)this.hasOwnProperty(ne)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[ne]=this[ne],delete this[ne])}_initializeProtoProperties(ne){this.__data=Object.create(ne),this.__dataPending=Object.create(ne),this.__dataOld={}}_addPropertyEffect(ne,re,de){let oe=t(this,J.ANY)[ne];oe||(oe=this.__propertyEffects[ne]=[],this._createPropertyAccessor(ne,re==J.READ_ONLY)),de&&oe.push(de),oe=t(this,re)[ne],oe||(oe=this[re][ne]=[]),oe.push(de)}_hasPropertyEffect(ne,re){let de=this[re||J.ANY];return!!(de&&de[ne])}_hasReadOnlyEffect(ne){return this._hasPropertyEffect(ne,J.READ_ONLY)}_hasNotifyEffect(ne){return this._hasPropertyEffect(ne,J.NOTIFY)}_hasReflectEffect(ne){return this._hasPropertyEffect(ne,J.REFLECT)}_hasComputedEffect(ne){return this._hasPropertyEffect(ne,J.COMPUTE)}_setPendingPropertyOrPath(ne,re,de,oe){let ie=Polymer.Path.root(Array.isArray(ne)?ne[0]:ne),_e=this.__propertyEffects&&this.__propertyEffects[ie],pe=ie!==ne;if(_e){if(pe){if(!oe){let se=Polymer.Path.get(this,ne);if(ne=Polymer.Path.set(this,ne,re),!ne||!super._shouldPropertyChange(ne,re,se))return!1}this.__dataHasPaths=!0}return this._setPendingProperty(ne,re,de)}return pe?Polymer.Path.set(this,ne,re):this[ne]=re,!1}_setUnmanagedPropertyToNode(ne,re,de){(de!==ne[re]||'object'==typeof de)&&(ne[re]=de)}_setPendingProperty(ne,re,de){let oe=this.__dataHasPaths&&Polymer.Path.isPath(ne),ie=oe?this.__dataTemp:this.__data;if(this._shouldPropertyChange(ne,re,ie[ne]))return this.__dataPending||(this.__dataPending={},this.__dataOld={}),ne in this.__dataOld||(this.__dataOld[ne]=this.__data[ne]),oe?this.__dataTemp[ne]=re:this.__data[ne]=re,this.__dataPending[ne]=re,(oe||this.__notifyEffects&&this.__notifyEffects[ne])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[ne]=de),!0}_setProperty(ne,re){this._setPendingProperty(ne,re,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataInitialized&&this._flushProperties()}_enqueueClient(ne){this.__dataPendingClients=this.__dataPendingClients||[],ne!==this&&this.__dataPendingClients.push(ne)}_flushClients(){this.__dataClientsInitialized||this._readyClients();let ne=this.__dataPendingClients;if(ne){this.__dataPendingClients=null;for(let de,re=0;re<ne.length;re++)de=ne[re],(!de.__dataInitialized||de.__dataPending)&&de._flushProperties()}}setProperties(ne){for(let re in ne)this.__readOnly&&this.__readOnly[re]||this._setPendingPropertyOrPath(re,ne[re],!0);this._invalidateProperties()}_flushProperties(){this.__dataInitialized?this.__dataPending&&(super._flushProperties(),!this.__dataCounter&&(this.__dataTemp={})):this.ready()}ready(){let ne=this.__dataInstanceProps;ne&&X(this,ne),this.__dataInitialized=!0,this.__dataPending?this._flushProperties():this._readyClients()}_readyClients(){this.__dataClientsInitialized=!0}_stampTemplate(ne){let re=super._stampTemplate(ne);return w(this),re}_propertiesChanged(ne,re,de){let oe=this.__dataHasPaths;this.__dataHasPaths=!1,E(this,re,de,oe),O(this,re,oe);let ie=this.__dataToNotify;this.__dataToNotify=null,r(this,this.__propagateEffects,re,de,oe),this._flushClients(),r(this,this.__reflectEffects,re,de,oe),r(this,this.__observeEffects,re,de,oe),ie&&s(this,ie,re,de,oe)}linkPaths(ne,re){ne=Polymer.Path.normalize(ne),re=Polymer.Path.normalize(re),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[ne]=re}unlinkPaths(ne){ne=Polymer.Path.normalize(ne),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[ne]}notifySplices(ne,re){let de={},oe=Polymer.Path.get(this,ne,de);G(this,oe,de.path,re)}get(ne,re){return Polymer.Path.get(re||this,ne)}set(ne,re,de){de?Polymer.Path.set(de,ne,re):(!this.__readOnly||!this.__readOnly[ne])&&this._setPendingPropertyOrPath(ne,re,!0)&&this._invalidateProperties()}push(ne,...re){let de={},oe=Polymer.Path.get(this,ne,de),ie=oe.length,_e=oe.push(...re);return re.length&&$(this,oe,de.path,ie,re.length,[]),_e}pop(ne){let re={},de=Polymer.Path.get(this,ne,re),oe=!!de.length,ie=de.pop();return oe&&$(this,de,re.path,de.length,0,[ie]),ie}splice(ne,re,de,...oe){let ie={},_e=Polymer.Path.get(this,ne,ie);re=0>re?_e.length-Math.floor(-re):Math.floor(re),re||(re=0);let pe=_e.splice(re,de,...oe);return(oe.length||pe.length)&&$(this,_e,ie.path,re,oe.length,pe),pe}shift(ne){let re={},de=Polymer.Path.get(this,ne,re),oe=!!de.length,ie=de.shift();return oe&&$(this,de,re.path,0,0,[ie]),ie}unshift(ne,...re){let de={},oe=Polymer.Path.get(this,ne,de),ie=oe.unshift(...re);return re.length&&$(this,oe,de.path,0,re.length,[]),ie}notifyPath(ne,re){let de;if(1==arguments.length){let oe={};re=Polymer.Path.get(this,ne,oe),de=oe.path}else de=Array.isArray(ne)?Polymer.Path.normalize(ne):ne;this._setPendingPropertyOrPath(de,re,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(ne,re){this._addPropertyEffect(ne,J.READ_ONLY),re&&(this['_set'+K(ne)]=function(de){this._setProperty(ne,de)})}_createPropertyObserver(ne,re,de){let oe={property:ne,methodName:re};this._addPropertyEffect(ne,J.OBSERVE,{fn:_,info:oe,trigger:{name:ne}}),de&&this._addPropertyEffect(re,J.OBSERVE,{fn:_,info:oe,trigger:{name:re}})}_createMethodObserver(ne,re){let de=F(ne);if(!de)throw new Error('Malformed observer expression \''+ne+'\'');H(this,de,J.OBSERVE,Y,null,re)}_createNotifyingProperty(ne){this._addPropertyEffect(ne,J.NOTIFY,{fn:P,info:{eventName:Q.camelToDashCase(ne)+'-changed',property:ne}})}_createReflectedProperty(ne){let re=Q.camelToDashCase(ne);'-'===re[0]?console.warn('Property '+ne+' cannot be reflected to attribute '+re+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property thisead.'):this._addPropertyEffect(ne,J.REFLECT,{fn:c,info:{attrName:re}})}_createComputedProperty(ne,re,de){let oe=F(re);if(!oe)throw new Error('Malformed computed expression \''+re+'\'');H(this,oe,J.COMPUTE,C,ne,de)}_bindTemplate(ne,re){this.__propagateEffects={},this.__notifyListeners=[];let de=this._parseTemplateAnnotations(ne);z(de);for(let ie,_e,oe=0;oe<de.length&&(ie=de[oe]);oe++){_e=ie.bindings;for(let se,pe=0;pe<_e.length&&(se=_e[pe]);pe++)D(se)&&S(this,oe,se.name,se.parts[0].value,se.parts[0].event,se.parts[0].negate),N(this,se,oe,re)}}}return ae})})();</script>
</head><body></body></html>