<!--
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><html><head><link rel="import" href="../../polymer-element.html">
<link rel="import" href="../utils/mixin.html">
<link rel="import" href="../utils/array-splice.html">

<script>(function(){'use strict';let a=Polymer.dedupingMixin(c=>{return class extends c{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return['__updateSelection(multi, items.*)']}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(d,e){let f=e.path;if('items'==f){let g=e.base||[],h=this.__lastItems,k=this.__lastMulti;if(d!==k&&this.clearSelection(),h){let l=Polymer.ArraySplice.calculateSplices(g,h);this.__applySplices(l)}this.__lastItems=g,this.__lastMulti=d}else if('items.splices'==e.path)this.__applySplices(e.value.indexSplices);else{let g=f.slice('items.'.length),h=parseInt(g,10);0>g.indexOf('.')&&g==h&&this.__deselectChangedIdx(h)}}__applySplices(d){let e=this.__selectedMap;for(let h,g=0;g<d.length;g++){h=d[g],e.forEach((k,l)=>{k<h.index||(k>=h.index+h.removed.length?e.set(l,k+h.addedCount-h.removed.length):e.set(l,-1))});for(let l,k=0;k<h.addedCount;k++)l=h.index+k,e.has(this.items[l])&&e.set(this.items[l],l)}this.__updateLinks();let f=0;e.forEach((g,h)=>{0>g?(this.multi?this.splice('selected',f,1):this.selected=this.selectedItem=null,e.delete(h)):f++})}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let d=0;this.__selectedMap.forEach(e=>{0<=e&&this.linkPaths('items.'+e,'selected.'+d++)})}else this.__selectedMap.forEach(d=>{this.linkPaths('selected','items.'+d),this.linkPaths('selectedItem','items.'+d)})}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(d){return this.__selectedMap.has(d)}isIndexSelected(d){return this.isSelected(this.items[d])}__deselectChangedIdx(d){let e=this.__selectedIndexForItemIndex(d);if(0<=e){let f=0;this.__selectedMap.forEach((g,h)=>{e==f++&&this.deselect(h)})}}__selectedIndexForItemIndex(d){let e=this.__dataLinkedPaths['items.'+d];if(e)return parseInt(e.slice('selected.'.length),10)}deselect(d){let e=this.__selectedMap.get(d);if(0<=e){this.__selectedMap.delete(d);let f;this.multi&&(f=this.__selectedIndexForItemIndex(e)),this.__updateLinks(),this.multi?this.splice('selected',f,1):this.selected=this.selectedItem=null}}deselectIndex(d){this.deselect(this.items[d])}select(d){this.selectIndex(this.items.indexOf(d))}selectIndex(d){let e=this.items[d];this.isSelected(e)?this.toggle&&this.deselectIndex(d):(!this.multi&&this.__selectedMap.clear(),this.__selectedMap.set(e,d),this.__updateLinks(),this.multi?this.push('selected',e):this.selected=this.selectedItem=e)}}});Polymer.ArraySelectorMixin=a;class b extends a(Polymer.Element){static get is(){return'array-selector'}}customElements.define(b.is,b),Polymer.ArraySelector=b})();</script>
</head><body></body></html>